{% extends "base.html" %}
{% block title %}SASP - Panel de Control{% endblock %}

{% block content %}
<div class="dashboard">

  <!-- Encabezado -->
  <header class="page-header">
    <h2>Bienvenido(a), {{ nombre }}</h2>
    <p class="subtitle">
      Cargue los archivos de n칩mina por quincena para su validaci칩n.<br>
      El sistema detectar치 autom치ticamente posibles duplicidades de personal entre entes.
    </p>
  </header>

  <div class="template-download">
    <a href="{{ url_for('descargar_plantilla') }}" class="btn btn-success">
      游닌 Descargar plantilla Excel
    </a>
  </div>


  <!-- 츼rea de carga -->
  <section class="upload-section">
    <form id="uploadForm" method="POST" enctype="multipart/form-data" action="{{ url_for('upload_laboral') }}">
      <div class="upload-area" id="uploadArea" tabindex="0" aria-label="츼rea para subir archivos Excel">
        <div class="upload-icon">游늭</div>
        <div class="upload-text">
          <h3>Arrastre o seleccione los archivos Excel</h3>
          <p class="hint">Formatos permitidos: <strong>.xlsx / .xls</strong></p>
        </div>
        <input type="file" id="fileInput" name="files" multiple accept=".xlsx,.xls" hidden>
      </div>
    </form>

    <!-- Estado del proceso -->
    <div id="uploadStatus" class="upload-status" hidden>
      <div class="spinner"></div>
      <p>Analizando archivos, espere por favor...</p>
    </div>

    <!-- Resultado -->
    <div id="uploadResult" class="upload-result" hidden>
      <h4>Resultado del an치lisis</h4>
      <p id="resultMessage"></p>
      <a href="{{ url_for('reporte_por_ente') }}" class="btn btn-primary">Ver Reporte General</a>
    </div>
  </section>

</div>
{% endblock %}

